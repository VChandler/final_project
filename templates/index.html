<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final Project</title>
    <!-- Latest compiled and minified CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

</head>

<body>
    <!-- Navbar -->
    <nav class="navbar sticky-top navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">Refresh</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" aria-current="page" href="#anchor1">ML Prediction</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#anchor2" data-bs-toggle="collapse" data-bs-target="#panel1"
                            aria-controls="panel1-controls">Track Features</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#anchor3" data-bs-toggle="collapse" data-bs-target="#panel2"
                            aria-controls="panel2-controls">Features vs Popularity</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#anchor4" data-bs-toggle="collapse" data-bs-target="#panel3"
                            aria-controls="panel3-controls">More Charts</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container" id="main1">
        <!-- Jumbotron -->
        <div class="row">
            <div class="bg-light p-5 my-3" id="jumbotron">
                <h1 class="display-4">Final Project</h1>
                <p class="lead">Predicting "Hit" or not</p>
                <hr class="my-4">
                <p>Can we determine whether a track would be popular or not?</p>
            </div>
        </div>
        <div class="anchor" id="anchor1"></div>
        <div class="row bg-color" id="main2">

            <div class="col-md-4 col-xs-12">
                <!-- User Input Form  -->
                <form class="form" method="POST" action="/test">
                    <h2>Build A Song!</h2>
                    <ul class="list-group bg-dark">
                        <li class="list-group-item bg-dark">

                            <label for="genre">Enter Genre</label>
                            <select id="genre" name="genre" data-genre="{{ predict_list_df['genre'] }}">
                                <option value="genre_Pop">Pop</option>
                                <option value="genre_Rock">Rock</option>
                                <option value="genre_Indie">Indie</option>
                                <option value="genre_Ska_Reggae">Ska/Reggae</option>
                                <option value="genre_Danceclub">Danceclub</option>
                                <option value="genre_Folk_Country">Folk/Country</option>
                                <option value="genre_Jazz_Blues">Jazz/Blues</option>
                                <option value="genre_World">World</option>
                                <option value="genre_Cinema">Cinema</option>
                                <option value="genre_Childrens">Children's</option>
                                <option value="genre_Classical">Classical</option>
                                <option value="genre_Hip_Hip_R&B">Hip Hop/R&B</option>
                            </select>

                            <input type="checkbox" name="genre_Pop" value="1.0" checked="checked" />
                            <input type="hidden" name="genre_Pop" value="0.0" />
                            <input type="checkbox" name="genre_Rock" value="1.0" />
                            <input type="hidden" name="genre_Rock" value="0.0" />
                            <input type="checkbox" name="genre_Indie" value="1.0" />
                            <input type="hidden" name="genre_Indie" value="0.0" />
                            <input type="checkbox" name="genre_Ska_Reggae" value="1.0" />
                            <input type="hidden" name="genre_Ska_Reggae" value="0.0" />
                            <input type="checkbox" name="genre_Danceclub" value="1.0" />
                            <input type="hidden" name="genre_Danceclub" value="0.0" />
                            <input type="checkbox" name="genre_Folk_Country" value="1.0" />
                            <input type="hidden" name="genre_Folk_Country" value="0.0" />
                            <input type="checkbox" name="genre_Jazz_Blues" value="1.0" />
                            <input type="hidden" name="genre_Jazz_Blues" value="0.0" />
                            <input type="checkbox" name="genre_World" value="1.0" />
                            <input type="hidden" name="genre_World" value="0.0" />
                            <input type="checkbox" name="genre_Cinema" value="1.0" />
                            <input type="hidden" name="genre_Cinema" value="0.0" />
                            <input type="checkbox" name="genre_Childrens" value="1.0" />
                            <input type="hidden" name="genre_Childrens" value="0.0" />
                            <input type="checkbox" name="genre_Classical" value="1.0" />
                            <input type="hidden" name="genre_Classical" value="0.0" />
                            <input type="checkbox" name="genre_Hip_Hip_R&B" value="1.0" />
                            <input type="hidden" name="genre_Hip_Hip_R&B" value="0.0" />
                        </li>
                        <li class="list-group-item bg-dark">
                            <label for="acousticness">Enter Acousticness</label>
                            <input type="number" name="acousticness" min="0.0" max=".999" step=".005"
                                value="{{ predict_list_df['acousticness'] }}" />
                        </li>
                        <li class="list-group-item bg-dark">
                            <label for="danceability">Enter Danceability</label>
                            <input type="number" name="danceability" min="0.0" max=".999" step=".005"
                                value="{{ predict_list_df['danceability'] }}" />
                        </li>
                        <li class="list-group-item bg-dark">
                            <label for="energy">Enter Energy</label>
                            <input type="number" name="energy" min="0.0" max=".999" step=".005"
                                value="{{ predict_list_df['energy'] }}" />
                        </li>
                        <li class="list-group-item bg-dark">
                            <label for="instrumentalness">Enter Instrumentalness</label>
                            <input type="number" name="instrumentalness" min="0.0" max=".999" step=".005"
                                value="{{ predict_list_df['instrumentalness'] }}" />
                        </li>
                        <li class="list-group-item bg-dark">
                            <label for="liveness">Enter Liveness</label>
                            <input type="number" name="liveness" min="0.0" max=".999" step=".005"
                                value="{{ predict_list_df['liveness'] }}" />
                        </li>
                        <li class="list-group-item bg-dark">
                            <label for="loudness">Enter Loudness</label>
                            <input type="number" name="loudness" min="-100.0" max="10.0" step=".5"
                                value="{{ predict_list_df['loudness'] }}" />
                        </li>
                        <li class="list-group-item bg-dark">
                            <label for="speechiness">Enter Speechiness</label>
                            <input type="number" name="speechiness" min="0.0" max=".999" step=".005"
                                value="{{ predict_list_df['speechiness'] }}" />
                        </li>
                        <li class="list-group-item bg-dark">
                            <label for="tempo">Enter Tempo</label>
                            <input type="number" name="tempo" min="0.0" max="300.0" step="2.0"
                                value="{{ predict_list_df['tempo'] }}" />
                        </li>
                        <li class="list-group-item bg-dark">
                            <label for="valence">Enter Valence</label>
                            <input type="number" name="valence" min="0.0" max=".999" step=".005"
                                value="{{ predict_list_df['valence'] }}" />
                        </li>
                    </ul>
                    <!-- Button  -->
                    <input type="submit" value="Hit or Not?" class="btn btn-outline-light float-end my-3">
                </form>

            </div>
            <div class="col-md-8 col-xs-12">
                <div id="info">
                    <h2>Machine Learning Predictor</h2>
                    <p>
                        We analyzed various features of 177,000 different Spotify tracks across
                        genres to see which features are the most predictive in determining the
                        popularity of the track. We examined the results from two different
                        models - logistic regression and random forest. Both produced similar results,
                        but Random Forest (with 128 estimators) was slightly better. We saved our model,
                        and created a web application that enables users to explore the data and enter
                        characteristics to predict the popularity of a track.
                    </p>
                    <p>
                    <ul>
                        <li>Enter values for the features in the form on the left</li>
                        <li>Press the button "Hit or Not?" to make a prediction</li>
                        <li>See the results below!</li>
                    </ul>
                    </p>
                </div>
                <div class="{{ hit }}" id="gauge">
                    <div class="gauge-layer" id="gauge-background"></div>
                    <div class="gauge-layer" id="gauge-percent"></div>
                    <div class="gauge-layer" id="gauge-overlay"></div>
                    <div class="gauge-layer" id="gauge-text">
                        <h1>{{ prediction_text }}</h1>
                    </div>
                </div>
            </div>


            <hr>

            <div class="accordion" id="anchor2">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="panelsStayOpen-headingOne">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse"
                            data-bs-target="#panel1" aria-expanded="true" aria-controls="panel1-controls">
                            Artist Dashboard
                        </button>
                    </h2>
                    <div id="panel1" class="accordion-collapse collapse show" aria-labelledby="panel1-controls"
                        data-bs-parent="#anchor2">
                        <div class="accordion-body">
                            <!-- Tableau Artist Dashboard  -->
                            <div class="row bg-color">
                                <div class="col-md-12 col-xs-12">
                                    <div class='tableauPlaceholder' id='viz1642458679068' style='position: relative'>
                                        <object class='tableauViz' style='display:none;'>
                                            <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' />
                                            <param name='embed_code_version' value='3' />
                                            <param name='site_root' value='' />
                                            <param name='name' value='ArtistDashboardDraft&#47;ArtistTrackDashboard' />
                                            <param name='tabs' value='no' />
                                            <param name='toolbar' value='yes' />
                                            <param name='animate_transition' value='yes' />
                                            <param name='display_static_image' value='yes' />
                                            <param name='display_spinner' value='yes' />
                                            <param name='display_overlay' value='yes' />
                                            <param name='display_count' value='yes' />
                                            <param name='language' value='en-US' />
                                            <param name='filter' value='publish=yes' />
                                        </object>
                                    </div>
                                    <script type='text/javascript'>
                                        var divElement = document.getElementById('viz1642458679068');
                                        var vizElement = divElement.getElementsByTagName('object')[0];
                                        if (divElement.offsetWidth > 800) { vizElement.style.minWidth = '378px'; vizElement.style.maxWidth = '1578px'; vizElement.style.width = '100%'; vizElement.style.height = '646px'; }
                                        else if (divElement.offsetWidth > 500) { vizElement.style.minWidth = '378px'; vizElement.style.maxWidth = '1578px'; vizElement.style.width = '100%'; vizElement.style.height = '646px'; }
                                        else { vizElement.style.width = '100%'; vizElement.style.height = '727px'; }
                                        var scriptElement = document.createElement('script');
                                        scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
                                        vizElement.parentNode.insertBefore(scriptElement, vizElement);
                                    </script>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>


                <div class="accordion-item">
                    <h2 class="accordion-header" id="panelsStayOpen-headingTwo">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#panel2" aria-expanded="false" aria-controls="panel2-controls">
                            Features vs Popularity
                        </button>
                    </h2>
                    <div class="anchor" id="anchor3"></div>
                    <div id="panel2" class="accordion-collapse collapse" aria-labelledby="panel2-controls"
                        data-bs-parent="#anchor2">
                        <div class="accordion-body">
                            <!-- Tableau Features vs Popularity -->
                            <div class="row bg-color">
                                <div class="col-md-12 col-xs-12">
                                    <div class='tableauPlaceholder' id='viz1642457938976' style='position: relative'>
                                        <object class='tableauViz' style='display:none;'>
                                            <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' />
                                            <param name='embed_code_version' value='3' />
                                            <param name='site_root' value='' />
                                            <param name='name'
                                                value='FeaturesvsPopularityDashboard&#47;FeaturesvsPopularity' />
                                            <param name='tabs' value='no' />
                                            <param name='toolbar' value='yes' />
                                            <param name='animate_transition' value='yes' />
                                            <param name='display_static_image' value='yes' />
                                            <param name='display_spinner' value='yes' />
                                            <param name='display_overlay' value='yes' />
                                            <param name='display_count' value='yes' />
                                            <param name='language' value='en-US' />
                                            <param name='filter' value='publish=yes' />
                                        </object>
                                    </div>
                                    <script type='text/javascript'>
                                        var divElement = document.getElementById('viz1642457938976');
                                        var vizElement = divElement.getElementsByTagName('object')[0];
                                        if (divElement.offsetWidth > 800) { vizElement.style.minWidth = '800px'; vizElement.style.maxWidth = '4778px'; vizElement.style.width = '100%'; vizElement.style.height = '1446px'; }
                                        else if (divElement.offsetWidth > 500) { vizElement.style.minWidth = '800px'; vizElement.style.maxWidth = '4778px'; vizElement.style.width = '100%'; vizElement.style.height = '1446px'; }
                                        else { vizElement.style.width = '100%'; vizElement.style.height = '2977px'; }
                                        var scriptElement = document.createElement('script');
                                        scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
                                        vizElement.parentNode.insertBefore(scriptElement, vizElement);
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="accordion-item">
                    <h2 class="accordion-header" id="panelsStayOpen-headingThree">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#panel3" aria-expanded="false" aria-controls="panel3-controls">
                            Extra Charts
                        </button>
                    </h2>
                    <div class="anchor" id="anchor4"></div>
                    <div id="panel3" class="accordion-collapse collapse" aria-labelledby="panel3-controls"
                        data-bs-parent="#anchor2">
                        <div class="accordion-body">
                            <!-- Tableau Extra Charts  -->
                            <div class="row bg-color">
                                <div class="col-md-12 col-xs-12">
                                    <div class='tableauPlaceholder' id='viz1641943995196' style='position: relative'>
                                        <object class='tableauViz' style='display:none;'>
                                            <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' />
                                            <param name='embed_code_version' value='3' />
                                            <param name='site_root' value='' />
                                            <param name='name'
                                                value='FinalProjectDraft2_16419439795740&#47;Dashboard2Draft' />
                                            <param name='tabs' value='no' />
                                            <param name='toolbar' value='yes' />
                                            <param name='animate_transition' value='yes' />
                                            <param name='display_static_image' value='yes' />
                                            <param name='display_spinner' value='yes' />
                                            <param name='display_overlay' value='yes' />
                                            <param name='display_count' value='yes' />
                                            <param name='language' value='en-US' />
                                            <param name='filter' value='publish=yes' />
                                        </object>
                                    </div>
                                    <script type='text/javascript'>
                                        var divElement = document.getElementById('viz1641943995196');
                                        var vizElement = divElement.getElementsByTagName('object')[0];
                                        if (divElement.offsetWidth > 800) { vizElement.style.width = '100%'; vizElement.style.height = (divElement.offsetWidth * 0.75) + 'px'; }
                                        else if (divElement.offsetWidth > 500) { vizElement.style.width = '100%'; vizElement.style.height = (divElement.offsetWidth * 0.75) + 'px'; }
                                        else { vizElement.style.width = '100%'; vizElement.style.height = '727px'; }
                                        var scriptElement = document.createElement('script');
                                        scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
                                        vizElement.parentNode.insertBefore(scriptElement, vizElement);
                                    </script>
                                    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.5.0/d3.js"></script>
                                    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
                                    <script src="static/js/plot.js"></script>
                                    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


</body>

</html>